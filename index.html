<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<title>Sportwave</title>

<style>
    body {
        background: #0b0b0b;
        color: white;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
    }

    h1 {
        text-align: center;
        margin-top: 20px;
        font-weight: 700;
    }

    #games {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        padding: 20px;
        gap: 20px;
    }

    .game-tab {
        width: 160px;
        background: #181818;
        border-radius: 10px;
        text-decoration: none;
        color: white;
        padding: 10px;
        text-align: center;
        transition: 0.2s;
        border: 1px solid #292929;
    }

    .game-tab:hover {
        transform: scale(1.05);
        background: #222;
    }

    .thumb {
        width: 140px;
        height: 80px;
        object-fit: cover;
        border-radius: 6px;
        margin-bottom: 10px;
    }

    .game-title {
        font-size: 14px;
        font-weight: 600;
    }

    #announcements {
        width: 90%;
        max-width: 600px;
        margin: 20px auto;
        background: #141414;
        padding: 20px;
        border-radius: 10px;
        border: 1px solid #242424;
    }

    .announce-item {
        padding: 8px 0;
        border-bottom: 1px solid #2a2a2a;
        font-size: 14px;
    }

    .announce-item:last-child {
        border-bottom: none;
    }
</style>
</head>

<body>

<h1>Sportwave</h1>

<div id="announcements"></div>

<div id="games"></div>

<script>
    const gamesURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRkv0zHUdhN-y48FkCmTeKwq6j-ZzOnvu0QPxZP4qeapyw0OfTY4jHZFpsLHD3zDWzDAcCkZKe8AY2K/pub?output=csv";
    const announcementsURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTVEKnXC_xcQSK3-w-1khtOJQ4j0rbEsjdKtbqdjcJA5bs5_WTjTSTpQxkiCVg06a-c-1E0oTduvb16/pub?output=csv";

    // Proper CSV parser that handles commas + quotes
    function parseCSV(text) {
        const rows = [];
        let current = "";
        let insideQuotes = false;
        let row = [];

        for (let i = 0; i < text.length; i++) {
            const char = text[i];
            const next = text[i + 1];

            if (char === '"' && insideQuotes && next === '"') {
                current += '"';
                i++;
            } else if (char === '"') {
                insideQuotes = !insideQuotes;
            } else if (char === ',' && !insideQuotes) {
                row.push(current.trim());
                current = "";
            } else if ((char === '\n' || char === '\r') && !insideQuotes) {
                if (current.length > 0 || row.length > 0) {
                    row.push(current.trim());
                    rows.push(row);
                    row = [];
                    current = "";
                }
            } else {
                current += char;
            }
        }

        if (current.trim() || row.length) {
            row.push(current.trim());
            rows.push(row);
        }

        const headers = rows[0];
        return rows.slice(1).map(r => {
            const obj = {};
            headers.forEach((h, i) => obj[h] = r[i] || "");
            return obj;
        });
    }

    // Load games
    fetch(gamesURL)
        .then(r => r.text())
        .then(data => {
            const games = parseCSV(data);
            const gamesDiv = document.getElementById("games");

            games.forEach(g => {
                if (!g.Title) return;

                const tab = document.createElement("a");
                tab.href = g.Link;
                tab.className = "game-tab";
                tab.target = "_blank";

                tab.innerHTML = `
                    <img src="${g.Thumbnail}" class="thumb">
                    <div class="game-title">${g.Title}</div>
                `;

                gamesDiv.appendChild(tab);
            });
        });

    // Load announcements
    fetch(announcementsURL)
        .then(r => r.text())
        .then(data => {
            const ann = parseCSV(data);
            const box = document.getElementById("announcements");

            ann.forEach(a => {
                if (!a.Title) return;

                const item = document.createElement("div");
                item.className = "announce-item";
                item.textContent = a.Title;

                box.appendChild(item);
            });
        });
</script>

</body>
</html>



